# README for code with the paper:
PAG et al., "Fighting force and experience combine to determine contest success in a warlike mammal"

## Overview
- This document describes the R code accompanying the paper, with heavily annotated files to facilitate re-running analyses.
- A data-description.doc provides detailed information about the datasets used.
- Files that have been revised after initial publication are labeled with "REVISION" in the filename.
- If any files are missing or bugs are found, contact PAG at pagreen@ucsb.edu.

## Code components and analyses
- IMPUTATION_ANALYSIS
  - "Imputation_Checking_code" verifies that the imputation process does not bias group weight data.
  - "Imputation_Analysis_Code_FINAL" contains the full imputation and analysis workflow.
  - "Bayesian_Analysis" performs a Bayesian analysis on the same imputed datasets for comparison with the maximum likelihood approach.
  - Data inputs (pre-imputation) required by these codes:
    - pre-imputation_igi_winloss_focalonly_wpregnant
    - pre-imputation_rival_igi_winloss_wpregnant
    - pre-imputation_group_comp_wpregnant
    - pre-imputation_rival_group_comp_wpregnant
    - combined_field_capture_weight_data_wpregnancy

- OUTPUT_ANALYSIS
  - "IGI_OutputAnalyses" summarizes outputs from the imputation and analysis steps and compares Bayesian results to maximum likelihood results.
  - Data inputs used by this code include:
    - mod.names.AICs.combined.dataframe.1 through mod.names.AICs.combined.dataframe.5
    - mod.avg.coef.df.1 through mod.avg.coef.df.5
    - var.imp.df.1 through var.imp.df.5
    - FE.rds
    - ML_model_output

- FOLLOW_UP_ANALYSES
  - "IGI_FollowUpAnalyses_FINAL" conducts all follow-up analyses described in the main text.
  - Data inputs for follow-up analyses include:
    - combined_igi_list_node1.2_reps1_2000.rds
    - focal_group_comp_list_node1.2_reps1_2000.rds
    - rival_group_comp_list_node1.2_reps1_2000.rds
    - life_history
    - captures
    - oestrus
    - full parentage assignments to 2016
    - final 2020 complete pedigree 29-06-20
    - Evictees
    - lifehistory 20210525 (updated for eviction analysis)

## Data files and provenance
- The above analyses rely on data generated by the data generation code described in the project.
- All listed pre-imputation and associated data files are used across the analysis pipeline to ensure traceability and reproducibility.

## Reproducibility and data governance
- The workflow is fully annotated to support re-running analyses and auditing data processing steps.
- Data description and lineage are clearly documented to aid understanding of data sources, transformations, and dependencies.
- Revision-tagged files and a centralized contact point help maintain data integrity and collaboration.

## Access and support
- If any files are missing or bugs are found, contact PAG at pagreen@ucsb.edu.
- Review the data-description.doc for detailed dataset information and context.