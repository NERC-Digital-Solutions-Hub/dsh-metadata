# Documentation for model code to simulate animal behaviour in response to light

- Purpose and scope
  - Provides material to reproduce 3D volumetric data describing photon energy density in a simulated environment.
  - Produces heatmaps and journey lengths for ensembles of weighted walkers (animals) in the simulated environments.
  - Includes source code for snapshots of Monte Carlo Radiative Transfer (MCRT) and weighted random-walking code, along with inputs and configuration files for both.

- Relevance for GIS Specialists
  - Data can be visualized as 3D energy density fields and 2D heatmaps derived from the 3D data.
  - Supports map-based inspection of spatial patterns of light energy and animal movement paths in geospatial contexts.
  - Interfaces with reproducible workflows; outputs can be integrated into GIS pipelines that handle 3D geometries and atmospheric/urban models.

- Whatâ€™s in the dataset
  - MCRT outputs: 3D volumetric data describing photon energy density in the simulated environment.
  - Grid walker outputs: 2D plane slices from the 3D data producing heatmaps and journey lengths for weighted walkers.
  - Code and tools:
    - MCRT solver (mcrt/aetherus-0.2.0.tar.gz) and supporting library (Aetherus) with source and binaries.
    - Weighted random walking Python code (grid_walker-0.1.0.tar.gz) with its own source.
    - Automation scripts to reproduce results.
  - Input data organization (in/ directory), including:
    - Light intensity distributions (LIDs): photometry in IES/LDT formats sourced from lamp manufacturers.
    - Geometry: terrain.obj and building geometries generated via a digital twins pipeline; terrain referenced to Defra National LIDAR Programme 2020 1m data; DSM/DTM data used for vertical extrusion.
    - Spectral data: USGS Spectral Library (version 7) for reflectances; emission spectra from LICA-UCM spectral database.
    - Materials, lights, and scene configuration: JSON/JSON5 configuration files, CSV/JSON spectral reflectances, photometric data (.ldt/.ies), and material definitions.
  - Outputs and data formats
    - Energy density volumes in metres-based geometry.
    - Heatmaps and journey-length maps derived from 2D planes extracted from the 3D energy data.
    - Outputs are designed to be consumed by the MCRT framework, grid_walker, and visualization tools.

- Collection/generation methods
  - 1. Collection of light data
    - Light intensity distributions supplied by manufacturers via goniophotometer measurements (IES/LDT format).
  - 2. Geometry generation
    - Terrain.obj generated by triangulating study plot bounds and elevating vertices using Defra LIDAR 2020 1m data (DTM/DSM referenced).
    - Building geometries derived from Ordnance Survey VectorMap Local (2nd Edition, 2018); extrusion along z-axis uses DSM data.
  - 3. Spectral data
    - Spectral reflectances from USGS library (version 7); data converted to CSV for MCRT input.
    - Emission spectra from LICA-UCM spectral database; converted to JSON for spline interpolation in MCRT.
  - 4. Units and references
    - Geometry units: metres (1 unit = 1 m).
    - Emission spectra and reflectances in relative units; photometric data in candela.

- Nature and units of recorded values
  - Geometry: metres.
  - Emission spectra and spectral reflectances: relative units.
  - Photometric data: luminous intensities in candela.

- Quality control and validation
  - MCRT source code includes unit tests for individual components and edge cases; checks against analytical predictions for the weighted walker code.
  - Meshes checked to be watertight; vertex normals oriented correctly.

- Details of data structure and components
  - Input data for MCRT: configuration files, spectra (.csv), spectral reflectances (JSON), photometric data (.ldt/.ies), and geometry (.obj).
  - MCRT solver and library: specific version 0.2.0 (Aetherus) provided as source and as Linux/macOS binaries.
  - Grid walker code: grid_walker-0.1.0, used to perform weighted random walks on 2D planes derived from 3D data.
  - Scripts: automate reproducibility of results (in/scripts directory).
  - Complete listing of files and directories (highlights):
    - in/ with input configurations (world.json5, template.main.json5, etc.), geometry (terrain.obj, buildings/*.obj, sky.obj), and LID data.
    - in/lids/: multiple IES/LDT files.
    - in/objs/: terrain.obj, sky.obj, and many building OBJ files.
    - in/spec/, in/mats/: spectral/specular data and material definitions.
    - Aetherus-0.2.0/: full solver code, tests, and tooling.
    - grid_walker-0.1.0/: Python code, benchmarks, tests, and README.
    - scripts/: Python and shell scripts, environment file for reproducibility.
  - Outputs produced by the workflow (not explicitly enumerated, but implied):
    - 3D energy density volumes.
    - 2D heatmaps and journey-length maps for walker ensembles.
    - Reproducible results via included test suites and scripts.

- Reproducibility and access
  - Provided as a self-contained deposit including:
    - Source and binaries for MCRT (Aetherus 0.2.0) and grid_walker 0.1.0.
    - Input data and configuration files for full replication of simulations.
    - Automation scripts to run scenarios and extract height- or plane-based data.

- Practical notes for GIS workflows
  - The 3D energy density data can be used to derive spatially explicit light-energy rasters and volume-based analyses in GIS environments.
  - Heatmaps from 2D planes enable quick visualization of animal-walker responses across geometries (terrain and buildings) and lighting setups.
  - The dataset provides a workflow that links photometric inputs, urban/terrain geometry, and movement simulations, suitable for geospatial analyses of light-driven animal behavior in defined terrains.
  - Data standards and format alignment (OBJ for geometry, IES/LDT for light distributions, JSON/CSV for configuration and spectra) facilitate integration with GIS data pipelines.